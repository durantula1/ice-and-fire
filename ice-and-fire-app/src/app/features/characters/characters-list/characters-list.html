<div class="characters-layout">

    <div class="characters-header p-4 pb-3">
        <div class="flex flex-column md:flex-row align-items-center justify-content-between gap-4">
            <div class="text-center md:text-left">
                <h1 class="text-4xl font-bold m-0">Characters</h1>
                <p class="text-600">Discover the heroes and villains of Westeros</p>
            </div>

            <div class="w-full md:w-auto">
                <div class="p-input-icon-left w-full md:w-20rem">
                    <input pInputText [ngModel]="searchTerm()" (ngModelChange)="searchTerm.set($event)" type="text"
                        placeholder="Search characters by full name" class="w-full" />
                </div>
            </div>
        </div>
    </div>

    <div class="characters-content" #charactersContent>
        <div class="p-4">
            @if (loading()) {
            <div class="grid">
                @for (item of CARDS_SKELETON_COUNT; track $index) {
                <div class="col-12 md:col-6 lg:col-4">
                    <app-characters-list-skeleton />
                </div>
                }
            </div>
            } @else if (characters(); as characters) {
            @if (characters.length > 0) {
            <div class="grid">
                @for (character of characters; track character.url) {
                <div class="col-12 md:col-6 lg:col-4">
                    <app-character-card [character]="character" />
                </div>
                }
            </div>
            } @else if (characters?.length === 0) {
            <p-card>
                <div class="text-center p-4">
                    <i class="pi pi-info-circle text-4xl text-600 mb-3"></i>
                    <p class="text-600 m-0">No characters found</p>
                </div>
            </p-card>
            }
            }
        </div>
    </div>

    @if (!loading() && characters()?.length && !searchTerm()) {
    <div class="characters-footer p-4 pt-3">
        <div class="flex justify-content-center">
            <p-paginator [first]="(currentPage() - 1) * pageSize()" [rows]="pageSize()" [totalRecords]="1000"
                (onPageChange)="onPageChange($event)">
            </p-paginator>
        </div>
    </div>
    }
</div>